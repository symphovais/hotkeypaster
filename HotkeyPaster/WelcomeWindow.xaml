<Window x:Class="TalkKeys.WelcomeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Welcome to TalkKeys"
        Height="520"
        Width="420"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <!-- Fade in animation -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.3"/>
        </Storyboard>
    </Window.Resources>

    <Border CornerRadius="16" Background="White" BorderBrush="#E5E7EB" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="40" ShadowDepth="8" Opacity="0.15" Color="#000000"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Step Indicators -->
            <StackPanel x:Name="StepIndicators" Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,24,0,0">
                <StackPanel Orientation="Horizontal">
                    <!-- Step 1 -->
                    <Border x:Name="Step1Indicator" Width="28" Height="28" CornerRadius="14" Background="#7C3AED">
                        <TextBlock Text="1" Foreground="White" FontSize="12" FontWeight="SemiBold"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock x:Name="Step1Label" Text="Account" FontSize="12" Foreground="#7C3AED" FontWeight="Medium"
                               VerticalAlignment="Center" Margin="8,0,0,0"/>

                    <!-- Connector -->
                    <Border Width="40" Height="2" Background="#E5E7EB" VerticalAlignment="Center" Margin="16,0"/>

                    <!-- Step 2 -->
                    <Border x:Name="Step2Indicator" Width="28" Height="28" CornerRadius="14" Background="#E5E7EB">
                        <TextBlock x:Name="Step2Number" Text="2" Foreground="#9CA3AF" FontSize="12" FontWeight="SemiBold"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock x:Name="Step2Label" Text="Ready" FontSize="12" Foreground="#9CA3AF" FontWeight="Medium"
                               VerticalAlignment="Center" Margin="8,0,0,0"/>
                </StackPanel>
            </StackPanel>

            <!-- Header -->
            <StackPanel x:Name="HeaderPanel" Grid.Row="1" Margin="32,24,32,0">
                <!-- Logo/Icon -->
                <Border Width="64" Height="64" CornerRadius="16" Background="#7C3AED" Margin="0,0,0,20">
                    <TextBlock Text="&#xE720;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="32"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>

                <TextBlock x:Name="HeaderTitle" Text="Welcome to TalkKeys"
                           FontSize="24"
                           FontWeight="SemiBold"
                           Foreground="#111827"
                           HorizontalAlignment="Center"/>

                <TextBlock x:Name="HeaderSubtitle" Text="Voice-to-text, instantly"
                           FontSize="14"
                           Foreground="#6B7280"
                           HorizontalAlignment="Center"
                           Margin="0,8,0,0"/>
            </StackPanel>

            <!-- Step 1: Authentication Content -->
            <StackPanel x:Name="Step1Content" Grid.Row="2" Margin="32,24,32,0" VerticalAlignment="Top">
                <!-- Sign in with Google Button -->
                <Button x:Name="GoogleSignInButton"
                        Click="GoogleSignIn_Click"
                        Height="48"
                        Cursor="Hand"
                        Margin="0,0,0,16">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bg"
                                                Background="White"
                                                BorderBrush="#E5E7EB"
                                                BorderThickness="1"
                                                CornerRadius="10">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <!-- Google G icon -->
                                                <Border Width="20" Height="20" Margin="0,0,12,0">
                                                    <TextBlock Text="G"
                                                               FontSize="16"
                                                               FontWeight="Bold"
                                                               Foreground="#4285F4"
                                                               HorizontalAlignment="Center"
                                                               VerticalAlignment="Center"/>
                                                </Border>
                                                <TextBlock Text="Continue with Google"
                                                           FontSize="15"
                                                           FontWeight="Medium"
                                                           Foreground="#374151"/>
                                            </StackPanel>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bg" Property="Background" Value="#F9FAFB"/>
                                                <Setter TargetName="bg" Property="BorderBrush" Value="#D1D5DB"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- Free tier info -->
                <Border Background="#F3E8FF" CornerRadius="8" Padding="12" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Free Account Includes:"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#7C3AED"
                                   Margin="0,0,0,6"/>
                        <TextBlock Text="&#x2022; 10 minutes of transcription per day"
                                   FontSize="12"
                                   Foreground="#6B7280"/>
                        <TextBlock Text="&#x2022; AI-powered text cleaning"
                                   FontSize="12"
                                   Foreground="#6B7280"/>
                        <TextBlock Text="&#x2022; Resets daily at midnight UTC"
                                   FontSize="12"
                                   Foreground="#6B7280"/>
                    </StackPanel>
                </Border>

                <!-- Divider -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Border Grid.Column="0" Height="1" Background="#E5E7EB" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="or" FontSize="12" Foreground="#9CA3AF" Margin="12,0"/>
                    <Border Grid.Column="2" Height="1" Background="#E5E7EB" VerticalAlignment="Center"/>
                </Grid>

                <!-- Use own API key link -->
                <Button x:Name="OwnApiKeyButton"
                        Click="OwnApiKey_Click"
                        Height="40"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bg" Background="Transparent" CornerRadius="8">
                                            <TextBlock Text="Use my own Groq API key"
                                                       FontSize="13"
                                                       Foreground="#6B7280"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       TextDecorations="Underline"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bg" Property="Background" Value="#F9FAFB"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>

            <!-- Status panel (shown during login) -->
            <StackPanel x:Name="StatusPanel" Grid.Row="2" Visibility="Collapsed" VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock x:Name="StatusText"
                           Text="Opening browser..."
                           FontSize="14"
                           Foreground="#6B7280"
                           HorizontalAlignment="Center"/>
                <Button x:Name="CancelButton"
                        Content="Cancel"
                        Click="Cancel_Click"
                        Margin="0,16,0,0"
                        Width="100"
                        Height="36"
                        FontSize="13"
                        Foreground="#6B7280"
                        Background="Transparent"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bg"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="8">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bg" Property="Background" Value="#F3F4F6"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>

            <!-- Step 2: Setup Complete Content -->
            <StackPanel x:Name="Step2Content" Grid.Row="2" Margin="32,16,32,0" Visibility="Collapsed" VerticalAlignment="Top">
                <!-- Success checkmark -->
                <Border Width="56" Height="56" CornerRadius="28" Background="#DCFCE7" HorizontalAlignment="Center" Margin="0,0,0,16">
                    <TextBlock Text="&#x2713;" FontSize="28" Foreground="#16A34A" FontWeight="Bold"
                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>

                <TextBlock x:Name="WelcomeUserText" Text="You're all set!"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Foreground="#111827"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,24"/>

                <!-- Hotkey info card -->
                <Border Background="#F3F4F6" CornerRadius="12" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Your Recording Shortcut"
                                   FontSize="12"
                                   Foreground="#6B7280"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,8"/>
                        <Border Background="White" CornerRadius="8" Padding="12,8" HorizontalAlignment="Center">
                            <TextBlock x:Name="HotkeyDisplay" Text="Ctrl + Shift + Space"
                                       FontSize="16"
                                       FontWeight="SemiBold"
                                       Foreground="#374151"/>
                        </Border>
                        <TextBlock x:Name="HotkeyModeText" Text="Press to start, press again to stop"
                                   FontSize="11"
                                   Foreground="#9CA3AF"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Quick tips -->
                <StackPanel Margin="0,8,0,0">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="&#x2022;" Foreground="#7C3AED" FontWeight="Bold" Margin="0,0,8,0"/>
                        <TextBlock Text="The floating widget shows when you're recording" FontSize="12" Foreground="#6B7280"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="&#x2022;" Foreground="#7C3AED" FontWeight="Bold" Margin="0,0,8,0"/>
                        <TextBlock Text="Text is automatically pasted where your cursor is" FontSize="12" Foreground="#6B7280"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="&#x2022;" Foreground="#7C3AED" FontWeight="Bold" Margin="0,0,8,0"/>
                        <TextBlock Text="Right-click the tray icon for settings" FontSize="12" Foreground="#6B7280"/>
                    </StackPanel>
                </StackPanel>

                <!-- Get Started button -->
                <Button x:Name="GetStartedButton"
                        Content="Get Started"
                        Click="GetStarted_Click"
                        Height="48"
                        Margin="0,24,0,0"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bg"
                                                Background="#7C3AED"
                                                CornerRadius="10">
                                            <TextBlock Text="{TemplateBinding Content}"
                                                       FontSize="15"
                                                       FontWeight="SemiBold"
                                                       Foreground="White"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bg" Property="Background" Value="#6D28D9"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>

            <!-- Footer -->
            <StackPanel x:Name="FooterPanel" Grid.Row="3" Margin="32,0,32,24">
                <TextBlock x:Name="FooterText"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           FontSize="11"
                           Foreground="#9CA3AF">
                    By continuing, you agree to our Terms of Service.
                    <LineBreak/>
                    Your voice data is processed securely and never stored.
                </TextBlock>
            </StackPanel>
        </Grid>
    </Border>
</Window>
